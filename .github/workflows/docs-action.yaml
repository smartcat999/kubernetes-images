name: KseDocs

on:
  issues:
    types: [opened, edited]

jobs:
  KseDocsBuidler:

    runs-on: ubuntu-latest
    permissions:
      contents: read
      security-events: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Set env
        run: |
          KUBESPHERE=$(echo "${{github.event.issue.body}}" | grep -A 2 kseVersion | grep '^v')
          KUBERNETES=$(echo "${{github.event.issue.body}}" | grep -A 2 KubernetesVersion | grep '^v')
          echo "KUBESPHERE=$KUBESPHERE" >> $GITHUB_ENV
          echo "KUBERNETES=$KUBERNETES" >> $GITHUB_ENV
          echo $KUBESPHERE
          echo $KUBERNETES
          
